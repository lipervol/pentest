#!/bin/python
import socket
print"By LPB \nVersion 1.0\n"
ad="127.0.0.1"
port=raw_input("Please input a port:\n")
local=raw_input("Please input the path to target file(such as /root/):\n")
server=socket.socket()
server.bind((ad,eval(port)))
server.listen(5)
print "Listening on %s:%s"%(ad,port)
while True:
    client_socket,client_addr=server.accept()
    print "Recive from %s"%client_addr[0]
    file_name=client_socket.recv(1024)
    try:
        with open(local+file_name,"rb") as file:
            while True:
                file_data=file.read(1024)
                if file_data:
                    client_socket.send(file_data)
                else:
                    print "%s upload sccessful!"%file_name
                    break
    except:
        print "Failed!"
    client_socket.close()
    
    
